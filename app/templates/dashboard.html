{% extends "base.html" %}
{% block title %}Dashboard{% endblock %}
{% block content %}
<div class="mt-5">
    <div class="text-center">
        <h1>Welcome to TYPEEE!!!</h1>
        <p>Your highest score: <strong>{{ current_user.points }}</strong></p>
        <h1>{{ current_user.username }}, please read the Rules!</h1>
        <a href="{{ url_for('main.play') }}" class="btn btn-success btn-lg my-3">Play</a>
        <button class="btn btn-info btn-lg my-3" data-toggle="modal" data-target="#rulesModal">Rules</button>
        <a href="{{ url_for('main.logout') }}" class="btn btn-danger btn-lg my-3">Logout</a>
    </div>

    <h2 class="mt-5">Top 10 Players</h2>
    <table class="table table-striped table-bordered mt-3">
        <thead class="thead-dark">
            <tr>
                <th scope="col">Rank</th>
                <th scope="col">Username</th>
                <th scope="col">Score</th>
            </tr>
        </thead>
        <tbody>
            {% for player in leaderboard %}
            <tr>
                <th scope="row">{{ loop.index }}</th>
                <td>{{ player.username }}</td>
                <td>{{ player.points }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

<div class="modal fade" id="rulesModal" tabindex="-1" aria-labelledby="rulesModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="rulesModalLabel">Game Rules</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <p>The game is simple: type the name of the fruit displayed. The keyboard will be randomly shuffled, so be careful!</p>
                <p>Each round gives you less time. Good luck!</p>
                <p>The game ends if:</p>
                <ul>
                    <li>Time runs out</li>
                    <li>You refresh the page</li>
                    <li>You switch tabs</li>
                    <li>You attempt to cheat</li>
                </ul>
                <p>So if you're playing, play seriously. If you get an OS notification that forces you to leave the page, sorry, but the game will end. Really, sorry.</p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>
{% endblock %}
